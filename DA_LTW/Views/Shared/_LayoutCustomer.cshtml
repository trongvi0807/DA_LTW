<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Nhà Thuốc Online</title>
    <link rel="stylesheet" href="~/Content/StyleCustomer.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <!-- Bootstrap CSS -->
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" />
    @RenderSection("Styles", required: false)
    <style>
             /* --- CSS cho Menu Tài Khoản --- */

             /* Style cho khu vực thông tin user đã đăng nhập */
             .user-info {
                 display: flex;
                 align-items: center;
                 gap: 8px; /* Khoảng cách giữa avatar và tên */
             }

             /* Style cho avatar dạng ảnh */
             .user-avatar {
                 width: 32px;
                 height: 32px;
                 border-radius: 50%; /* Bo tròn avatar */
                 object-fit: cover; /* Đảm bảo ảnh không bị méo */
                 border: 1px solid #ddd;
             }

             /* Style cho avatar dạng icon (khi không có ảnh) */
             .user-avatar-icon {
                 font-size: 28px;
                 color: #555;
             }

             .user-name {
                 font-weight: 500;
             }

             /* Ẩn/Hiện menu con (submenu) khi hover */
             /* Đoạn CSS này có thể bạn đã có rồi cho menu "Thuốc",
        nhưng thêm vào để chắc chắn nó hoạt động cho cả menu tài khoản */

             .main-menu li.dropdown {
                 position: relative; /* Cần thiết để định vị menu con */
             }

             .main-menu .submenu {
                 display: none; /* Mặc định ẩn menu con */
                 position: absolute;
                 top: 100%;
                 left: 0;
                 background-color: #fff;
                 list-style: none;
                 padding: 10px 0;
                 margin: 0;
                 min-width: 200px;
                 box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                 border-radius: 4px;
                 z-index: 1000;
             }

             .main-menu li.dropdown:hover > .submenu {
                 display: block; /* Hiển thị menu con khi hover vào thẻ li cha */
             }

             .main-menu .submenu li {
                 width: 100%;
             }

                 .main-menu .submenu li a {
                     display: block;
                     padding: 8px 20px;
                     color: #333;
                     white-space: nowrap; /* Ngăn text xuống dòng */
                 }

                     .main-menu .submenu li a:hover {
                         background-color: #f5f5f5;
                         color: #20c997; /* Màu xanh ngọc chủ đạo */
                     }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="https://res.cloudinary.com/dxy81jyw2/image/upload/v1761979388/logo-nha-thuoc-1A47wD_agmkwi.webp" alt="Logo Nhà Thuốc" />
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Tìm kiếm thuốc, sản phẩm..." />
            <button type="submit"><i class="fa-solid fa-search"></i></button>
        </div>
        <nav class="main-menu">
            <ul>
                <li><a href="#"><i class="fa-solid fa-home"></i> Trang chủ</a></li>
                <li class="dropdown">
                    <a href="#"><i class="fa-solid fa-pills"></i> Thuốc <i class="fa-solid fa-chevron-down"></i></a>
                    <ul class="submenu">
                        <li><a href="#">Thuốc cảm cúm</a></li>
                        <li><a href="#">Thuốc đau đầu</a></li>
                        <li class="dropdown">
                            <a href="#">Thuốc bổ <i class="fa-solid fa-chevron-right"></i></a>
                            <ul class="submenu">
                                <li><a href="#">Vitamin C</a></li>
                                <li><a href="#">Canxi</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#"><i class="fa-solid fa-heartbeat"></i> Sức khỏe</a></li>
                <li><a href="#"><i class="fa-solid fa-shopping-cart"></i> Giỏ hàng</a></li>
                @* Kiểm tra xem người dùng đã đăng nhập hay chưa bằng cách xem Session["User"] *@
                @if (Session["User"] == null)
                {
                    <li class="dropdown">
                        <a href="#"><i class="fa-solid fa-user"></i> Tài khoản <i class="fa-solid fa-chevron-down"></i></a>
                        <ul class="submenu">
                            <li><a href="@Url.Action("Index", "Login")">Đăng nhập</a></li>
                            <li><a href="@Url.Action("Index", "Register")">Đăng ký</a></li>
                        </ul>
                    </li>
                }
                else
                {
                    var user = Session["User"] as DA_LTW.Models.user;

                    <li class="dropdown">
                        <a href="#" class="user-info">
                            @if (!string.IsNullOrEmpty(user.avatar))
                            {
                                <img src="@user.avatar" alt="Avatar" class="user-avatar" />
                            }
                            else
                            {
                                <i class="fa-solid fa-user-circle user-avatar-icon"></i>
                            }
                            <span class="user-name">@user.full_name</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </a>
                        <ul class="submenu">
                            <li><a href="@Url.Action("Profile", "HomeCustomer")">Thông tin cá nhân</a></li>
                            <li><a href="@Url.Action("Logout", "Login")">Đăng xuất</a></li>
                        </ul>
                    </li>
                }
            </ul>
        </nav>
    </header>
    <div class="container">
        <aside class="sidebar">
            <h3>Danh mục sản phẩm</h3>
            <ul>
                <li><a href="#"><i class="fa-solid fa-capsules"></i> Thuốc không kê đơn</a></li>
                <li><a href="#"><i class="fa-solid fa-prescription-bottle-medical"></i> Thuốc kê đơn</a></li>
                <li><a href="#"><i class="fa-solid fa-baby"></i> Sản phẩm cho trẻ em</a></li>
                <li><a href="#"><i class="fa-solid fa-female"></i> Sản phẩm phụ nữ</a></li>
                <li><a href="#"><i class="fa-solid fa-male"></i> Sản phẩm nam giới</a></li>
                <li><a href="#"><i class="fa-solid fa-star-half-stroke"></i> Sản phẩm nổi bật</a></li>
            </ul>
            <h3>Lọc theo giá</h3>
            <input type="range" min="0" max="1000000" />
        </aside>
        <main>
            @RenderBody()
        </main>
    </div>
    <footer>
        <p>2025 - HỆ THỐNG BÁN THUỐC ONLINE</p>
    </footer>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    @RenderSection("scripts", required: false)

</body>
</html>